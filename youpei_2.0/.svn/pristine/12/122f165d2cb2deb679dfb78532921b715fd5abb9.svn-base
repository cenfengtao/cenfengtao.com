<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
        <title>优培圈</title>
        <link rel="stylesheet" type="text/css" href="/Public/css/home/common.css"/>
        <link rel="stylesheet" type="text/css" href="/Public/css/home/com.css"/>
        <link rel="stylesheet" type="text/css" href="/Public/css/home/schedule.css"/>
        <link rel="stylesheet" type="text/css" href="__PUBLIC__/css/home/pageloader.css"/>
		<script type="text/javascript">
            if(/msie/i.test(navigator.userAgent)){window.location.href="http://www.youpei-exc.com/"}
        </script>
	</head>
    <style>
        .uploadClass{
            color: #fff;
        }
        .selected-style{
            background: orange;
        }
    </style>
	<body class="kap-loading ty-view-all">
        <include file="Common:common"/>
        <header class="header">
        	<a href="javascript:history.back()">
                <img src="../../../../Public/images/back.png" alt="">
            </a>
            <h3>我的课程表</h3>
            <a href="../Index/index.html" class="home" data-icon="Ņ"></a>
        </header>
        <article class="middle">
            <section class="advert">
                <img src="../../../../Public/images/scheduleAdvert.jpg" alt="">
            </section>
            <section class="date">
				<div class="boxshaw list" id="schedule-box">
					
				</div>
                <p class="explain">注：红色的小圆点代表有课上，灰色的小圆点代表已上或未上已过期，点击可查看详情。</p>
				<div class="arrange">
                    <div class="classTime">
                        <span>上课时间：</span>
                        <span class="time">2017年9月4日</span>
                    </div>
                    <ul class="arrangeList">
                        <li>
                            <div class="timeLong">
                                <span>10:00</span>
                                <span>—</span>
                                <span>11:00</span>
                                <a href="/index.php/personal/leave.html">请假</a>
                            </div>
                            <div class="classText">
                                <h3>史太姆积木课/48课时</h3>
                                <p class="teacher">上课老师：<span>Terry老师</span></p>
                                <p class="classNum">当前课次：<span>10/48</span></p>
                                <p class="address">上课地址：<span>广州海珠区燕子岗68号</span><img src="../../../../Public/images/scheduleAddress.png" alt=""></p>
                                <p class="phone">联系电话：<span>020-32548965</span><img src="../../../../Public/images/phone.png" alt=""></p>
                            </div>
                        </li>
                        <li>
                            <div class="timeLong">
                                <span>15:00</span>
                                <span>—</span>
                                <span>16:00</span>
                                <a href="/index.php/personal/leave.html">请假</a>
                            </div>
                            <div class="classText">
                                <h3>史太姆绘画课/16课时</h3>
                                <p class="teacher">上课老师：<span>KK老师</span></p>
                                <p class="classNum">当前课次：<span>2/16</span></p>
                                <p class="address">上课地址：<span>广州海珠区燕子岗68号</span><img src="../../../../Public/images/scheduleAddress.png" alt=""></p>
                                 <p class="phone">联系电话：<span>020-32548965</span><img src="../../../../Public/images/phone.png" alt=""></p>
                            </div>
                        </li>
                    </ul>
<!--                     <div>
                        <span class="uploadClass" attr_day="" attr_month="" attr_year="">上传课程</span>
                    </div> -->
                    <div class="uploadInfo" style="display: none;">
                        <img src="../../../../Public/images/addClass.jpg" alt="">
                        <span class="uploadClass" attr-year="" attr-month="" attr-day="">添加行程</span>
                    </div>
<!--                     <div class="upload" style="display: none">
                        <from>
                            <input type="text" name="class_title" placeholder="课程名称">
                            <input type="text" name="teacher" placeholder="上课老师">
                            <input type="text" name="username" placeholder="学生名">
                            <input type="text" name="class_hour" placeholder="课次"><br>
                            <input type="time" name="start_hour_time" value="09:00">
                            <input type="time" name="end_hour_time" value="11:00">
                            <button id="post">提交</button>
                        </from>
                    </div> -->
                    <div class="uploadContent" style="display: none;">
                        <form>
                            <div class="title">
                                <img src="../../../../Public/images/uploadWhite.png" alt="">
                                <span>课程安排</span>
                                <img src="../../../../Public/images/close.png" alt="" class="closeCourse">
                            </div>
                            <label class="classTimes">
                                <span>上课时间：</span>
                                <input type="time" id="test1" style="width: 2.2rem;" value="00:00" name="start_hour_time">
                                <!-- <select name="start_hour_time" id="">
                                    <option value="0:00">0:00</option>
                                    <option value="1:00">1:00</option>
                                    <option value="2:00">2:00</option>
                                    <option value="3:00">3:00</option>
                                    <option value="4:00">4:00</option>
                                    <option value="5:00">5:00</option>
                                    <option value="6:00">6:00</option>
                                    <option value="7:00">7:00</option>
                                    <option value="8:00">8:00</option>
                                    <option value="9:00">9:00</option>
                                    <option value="10:00">10:00</option>
                                    <option value="11:00">11:00</option>
                                    <option value="12:00">12:00</option>
                                    <option value="13:00">13:00</option>
                                    <option value="14:00">14:00</option>
                                    <option value="15:00">15:00</option>
                                    <option value="16:00">16:00</option>
                                    <option value="17:00">18:00</option>
                                    <option value="19:00">19:00</option>
                                    <option value="20:00">20:00</option>
                                    <option value="21:00">21:00</option>
                                    <option value="22:00">22:00</option>
                                    <option value="23:00">23:00</option>
                                    <option value="24:00">24:00</option>
                                </select> -->
                                <span class="contain">一</span>
                                <input type="time" id="test2" style="width: 2.2rem;" value="00:00" name="end_hour_time">
                               <!--  <select name="end_hour_time" id="">
                                    <option value="0:00">0:00</option>
                                    <option value="1:00">1:00</option>
                                    <option value="2:00">2:00</option>
                                    <option value="3:00">3:00</option>
                                    <option value="4:00">4:00</option>
                                    <option value="5:00">5:00</option>
                                    <option value="6:00">6:00</option>
                                    <option value="7:00">7:00</option>
                                    <option value="8:00">8:00</option>
                                    <option value="9:00">9:00</option>
                                    <option value="10:00">10:00</option>
                                    <option value="11:00">11:00</option>
                                    <option value="12:00">12:00</option>
                                    <option value="13:00">13:00</option>
                                    <option value="14:00">14:00</option>
                                    <option value="15:00">15:00</option>
                                    <option value="16:00">16:00</option>
                                    <option value="17:00">17:00</option>
                                    <option value="18:00">18:00</option>
                                    <option value="19:00">19:00</option>
                                    <option value="20:00">20:00</option>
                                    <option value="21:00">21:00</option>
                                    <option value="22:00">22:00</option>
                                    <option value="23:00">23:00</option>
                                    <option value="24:00">24:00</option>
                                </select> -->
                            </label>
                            <hr>
                            <label class="className">
                                <span>课程名称：</span>
                                <input type="text" placeholder="请输入......(必填)" name="class_title">
                            </label>
                            <hr> 
                            <label class="classTeacher">
                                <span>上课老师：</span>
                                <input type="text" placeholder="请输入......(必填)" name="teacher">
                            </label>
                            <hr>
                            <label class="username">
                                <span>上课学生：</span>
                                <input type="text" placeholder="请输入......(必填)" name="username">
                            </label>
                            <hr>
                            <label class="classNow">
                                <span>当前课时：</span>
                                <input type="text" placeholder="请输入......(必填)" name="class_hour">
                            </label>
                            <hr>
                            <label class="classAddress">
                                <span>上课地址：</span>
                                <select class="province" name="province">
                                    <option value="请选择省">省份</option>
                                </select>
                                <select class="city" name="city">
                                    <option value="请选择市">市</option>
                                </select>
                                <select class="county" name="county">
                                    <option value="请选择区">县/区</option>
                                </select>
                                <input type="text" placeholder="请输入详细的地址" name="details">
                            </label>
                            <span class="submit" id="post">确定</span>
                        </form>
                    </div>
                </div>  
            </section>            
        </article>
        <script src="/Public/Home/js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="/Public/js/home/dateSchedule.js" type="text/javascript" charset="utf-8"></script>
        <script src="/Public/Home/js/pageloader.js" type="text/javascript" charset="utf-8"></script>
        <script src="/Public/js/home/rem.js" type="text/javascript" charset="utf-8"></script>
        <script src="__PUBLIC__/js/home/city.js" type="text/javascript" charset="utf-8"></script>
        <!-- <script src="__PUBLIC__/js/laydate/laydate.js" type="text/javascript" charset="utf-8"></script> -->
        <script type="text/javascript">
        // 时分秒插件
        // laydate.render({
        //   elem: '#test1',
        //   type:"time"
        // });
        // laydate.render({
        //   elem: '#test2',
        //   type:"time"
        // });
        // 根据id调用月历插件
        	var mySchedule = new Schedule({
				el: '#schedule-box',
				//date: '2018-9-20',
				clickCb: function (y,m,d) {
                    $(".uploadInfo").show()
                    $(".uploadClass").attr("attr_year",y)
                    $(".uploadClass").attr("attr_month",m)
                    $(".uploadClass").attr("attr_day",d)
                    $(".time").html(y+'年'+m+'月'+d+'日')
                    setTimeout(function(){
                         var array=Array(10,2,23,4,6)

                    var length=$(".dayStyle").length;
                    for(var i=0; i<length; i++){
                      var td=document.getElementsByClassName("dayStyle")[i].innerHTML;
                      // console.log(td)
                      for(var j=0; j<array.length; j++){
                        if(td==array[j]){
                          // document.getElementsByClassName("dayStyle")[i].style.background="#f5dc56";
                          document.getElementsByTagName("i")[i].setAttribute('class', 'gray')
                        }
                      } 
                    }
                },1)
                    
				},
				nextMonthCb: function (y,m,d) {
					// var length=$(".dayStyle").length;
     //            	for(var i=0; i<length; i++){
     //            		if($(".dayStyle").eq(i).html()==5){
     //            			$(".dayStyle").eq(i).css("color","red")
     //            		}
     //            	}

				},
				nextYeayCb: function (y,m,d) {
					
				},
				prevMonthCb: function (y,m,d) {
				},
				prevYearCb: function (y,m,d) {
					
				}
			});
			if($(".schedule-bd li").length){
			}
            $('.uploadInfo').click(function () {
                $('.uploadContent').show();
            })
             $('.closeCourse').click(function () {
                $('.uploadContent').hide();
            })
            // var length=$(".dayStyle").length;
            // for(var i=0; i<length; i++){
            //     if($(".dayStyle").eq(i).html()==5){
            //         $(".dayStyle").eq(i).css("color","red")
            //     }
            // }
           
                var array=Array(10,2,23,4,6)
                    var length=$(".dayStyle").length;
                    for(var i=0; i<length; i++){
                      var td=document.getElementsByClassName("dayStyle")[i].innerHTML;
                      // console.log(td)
                      for(var j=0; j<array.length; j++){
                        if(td==array[j]){
                          // document.getElementsByClassName("dayStyle")[i].style.background="#f5dc56";
                          document.getElementsByTagName("i")[i].setAttribute('class', 'gray')
                        }
                      } 
                    }
        //城市级联的实现
        $(function () {
            $.getScript("../../../../Public/js/home/city.js", function (data) {
                var result = JSON.parse(data);
                var cityArr = [];
                var countyArr = [];
                for (var i = 0; i < result.length; i++) {
                    if (result[i].ProSort) {
                        $(".province").append("<option value='" + result[i].ProID + "'>" + result[i].name + "</option>")//把数据拼接到.province下的option里
                    } else if (result[i].CitySort) {
                        cityArr.push(result[i]);//把符合的数据放入cityArr里
                    } else if (result[i].DisSort == null) {
                        countyArr.push(result[i]);//把符合的数据放入countyArr里
                    }
                }
                $(".province").change(function () {
                    var value = $(this).val();
                    $(".city option").remove();
                    $(".province option").eq(0).remove();
                    for (var i = 0; i < cityArr.length; i++) {
                        if (cityArr[i].ProID == value) {
                            $(".city").append("<option value='" + cityArr[i].CityID + "'>" + cityArr[i].name + "</option>"); //把数据拼接到.city下的option里
                        }
                    }

                    var value2 = $(".city option").val();

                    $(".county option").remove();
                    for (var i = 0; i < countyArr.length; i++) {
                        if (countyArr[i].CityID == value2)
                            $(".county").append("<option>" + countyArr[i].DisName + "</option>")
                    }
                });
                $(".city").change(function () {
                    var value = $(this).val();
                    $(".county option").remove();
                    for (var i = 0; i < countyArr.length; i++) {
                        if (countyArr[i].CityID == value)
                            $(".county").append("<option>" + countyArr[i].DisName + "</option>")//把数据拼接到.county下的option里
                    }
                })
            })
            // 提交上课信息
            $('#post').click(function () {
                var year = $('.uploadClass').attr('attr_year');
                var month = $('.uploadClass').attr('attr_month');
                var day = $('.uploadClass').attr('attr_day');
                var data = {
                    start_day_time : year + month + day,
                    class_title : $("input[name='class_title']").val(),
                    teacher : $("input[name='teacher']").val(),
                    username : $("input[name='username']").val(),
                    class_hour : $("input[name='class_hour']").val(),
                    start_hour_time : $("input[name='start_hour_time']").val(),
                    end_hour_time : $("input[name='end_hour_time']").val(),
                    province:$(".province option:selected").html(),
                    city:$(".city option:selected").html(),
                    county:$(".county option:selected").html(),
                    details:$("input[name='details']").val()
                };
                var url = '/index.php/Personal/uploadClass';
                $.post(url,data,function (result) {
                    if(result.status == 1){
                        alert(result.message);
                        $(".uploadContent").hide()
                    }else{
                        alert(result.message);
                    }
                },'json')
            })
        });
       
        </script>
	</body>
</html>