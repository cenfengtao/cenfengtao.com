<?php
namespace Home\Controller;

use Think\Controller;
use Think\Exception;

class BoutiqueController extends BaseController
{
    public function index()
    {
        $this->title = "精品商品";
        try {
            $boutiqueList = M('Product')->where(array('type' => 2, 'status' => 1))->limit(0,10)->select();
            $this->assign('boutiqueList', $boutiqueList);
            $this->display();
        } catch (Exception $e) {
            $this->error($e->getMessage());
        }
    }

    public function loadingProduct()
    {
        $npage = (int)I("npage");
        $list = D('Product')->getListByPageToBoutique($npage);
        if (!$list || empty($list)) {
            $this->ajaxReturn(array('status' => 0, 'msg' => '没有数据'));
        }
        $this->ajaxReturn(array('status' => 1, 'msg' => '获取成功', 'data' => $list));
    }
}