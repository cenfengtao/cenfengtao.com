<?php
namespace Common\Model;

 class PictureModel extends BaseModel {
    public function queryPicture(){
	 $sql = "select * from __PREFIX__picture order by sort asc";
	 return $this->query($sql);
    }

 	//新增
   public function insertPicture($token){
    $rd = array('status'=>-1);
    $data = array();
    $data["image"] = I("adFile");
    $data["sort"] = I("sort");
    $data["is_show"] = (int)I("is_show");
    $data["create_time"] = time();
    $data["token"] = $token;
    if($this->checkEmpty($data)){
          $data["url"] = I("url",'','url');
    	$rs = $this->add($data);
	    if(false !== $rs){
			$rd['status']= 1;
		}
    }
    return $rd;
   }
   //修改
   public function editPicture(){
   	$rd = array('status'=>-1);
    $id = (int)I("id",0);
    $data["image"] = I("adFile");
    $data["sort"] = I("sort");

    $data["is_show"] = (int)I("is_show");
    $data["create_time"] = time();
    if($this->checkEmpty($data)){
          $data["url"] = I("url",'','url');
    	$rs = $this->where("id=".$id)->save($data);
	    if(false !== $rs){
			$rd['status']= 1;
		}
    }
    return $rd;
   }


   public function get(){
		return $this->where("id=".(int)I('id'))->find();
	 }
    /**
	  * 删除
	  */
	 public function del(){
	    $rd = array('status'=>-1);
	    $rs = $this->delete((int)I('id'));
		if(false !== $rs){
		   $rd['status']= 1;
		}
		return $rd;
	 }

    public function getPicture(){
     $sql = "SELECT * FROM __PREFIX__picture where is_show ='0' ORDER BY sort ASC";
     $rs = $this->query($sql);
     return $rs;
  }
 }