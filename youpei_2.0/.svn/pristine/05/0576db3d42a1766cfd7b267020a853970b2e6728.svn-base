<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>查看物流</title>
</head>
<body>
<header>
    <p><span id="express"></span><span id="express_number"></span></p>
</header>
<ul class='express_list'>

</ul>
<script src="/Public/js/jquery-1.10.2.min.js"></script>
<script>
    $(function () {
        var order_id = getQueryString('id');
        var ajaxUrl = "/index.php/Orders/ajaxCheckExpress?id=" + order_id;
        $.get(ajaxUrl, {id: order_id}, function (result) {
            if (result.status == 0) {
                return alert(result.message);
            }
            if (result.status == 1) {
                $("#express").text("订单确认中，待发货");
            }
            if (result.status == 2) {
                $("#express").text(result.data.express+" : ");
                $("#express_number").text(result.data.express_number);
                $.each(result.data.list, function (key, val) {
                    $(".express_list").append("<li>" +
                            "<p>" + val.time + "</p>" +
                            "<p>" + val.status + "</p>" +
                            "</li>");
                })
            }
        }, 'JSON');
    });

    function getQueryString(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
        var r = window.location.search.substr(1).match(reg);
        if (r != null) return unescape(r[2]);
        return null;
    }
</script>
</body>
</html>